<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 1920px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
							stroke-width: 0;
						}
</style><title>小项目 - 项目文档</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='项目文档'><span>项目文档</span></h1><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-1.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-1.png"></p><p>&nbsp;</p><h2 id='📖-项目简介'><span>📖 项目简介</span></h2><blockquote><p><span>《星开祈灵百宝箱》</span></p><p><span>一个整合多个小工具或小游戏的开源项目集合</span></p><p><span>包含批量图片水印处理、简单爬虫脚本、连连看游戏等模块，采用 SpringBoot + Vue3 技术栈实现</span></p></blockquote><p>&nbsp;</p><h2 id='🚀-快速开始'><span>🚀 快速开始</span></h2><h3 id='⚙️-环境要求'><span>⚙️ 环境要求</span></h3><figure><table><thead><tr><th style='text-align:center;' ><span>环境</span></th><th style='text-align:center;' ><span>版本</span></th><th style='text-align:center;' ><span>备注</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>JDK</span></td><td style='text-align:center;' ><span>17</span></td><td style='text-align:center;' ><span>严格匹配</span></td></tr><tr><td style='text-align:center;' ><span>Node.js</span></td><td style='text-align:center;' ><span>20.16.0</span></td><td style='text-align:center;' ><span>LTS版本</span></td></tr><tr><td style='text-align:center;' ><span>MySQL</span></td><td style='text-align:center;' ><span>5.7</span></td><td style='text-align:center;' ><span>最低要求</span></td></tr><tr><td style='text-align:center;' ><span>Redis</span></td><td style='text-align:center;' ><span>5.0+</span></td><td style='text-align:center;' ><span>兼容版本</span></td></tr></tbody></table></figure><p><span>❗ 版本警告：</span></p><p><span>   本项目使用 </span><strong><span>精确版本锁定</span></strong><span> 策略，若使用更高版本组件可能导致兼容性问题 </span></p><p><span>   （测试通过版本见上文，建议使用相同版本避免环境问题）</span></p><h3 id='🔧-启动步骤'><span>🔧 启动步骤</span></h3><ol start='' ><li><p><strong><span>克隆项目</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> clone https://github.com/KokoaChino/xkql.git</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre></li><li><p><strong><span>数据库初始化</span></strong></p><p><span>数据库初始化脚本位于 </span><code>/sql/xkql.sql</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 第一步：创建数据库</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql <span class="cm-attribute">-u</span> root <span class="cm-attribute">-p</span> <span class="cm-attribute">-e</span> <span class="cm-string">"CREATE DATABASE xkql CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 第二步：导入表结构及数据（注意文件路径）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mysql <span class="cm-attribute">-u</span> root <span class="cm-attribute">-p</span> xkql &lt; ./sql/xkql.sql</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p><span>或通过Navicat可视化操作：</span></p><ol start='' ><li><p><span>新建连接 -&gt; 输入root/123456</span></p></li><li><p><span>右键连接 -&gt; 创建数据库：</span></p><ul><li><span>数据库名：</span><code>xkql</code></li><li><span>字符集：</span><code>utf8mb4</code></li><li><span>排序规则：</span><code>utf8mb4_general_ci</code></li></ul></li><li><p><span>双击打开新数据库 -&gt; 右键数据库 -&gt; 运行SQL文件：</span></p><ul><li><span>文件选择项目中的 </span><code>/sql/xkql.sql</code></li><li><span>编码选择 </span><code>UTF-8</code></li></ul></li></ol></li><li><p><strong><span>启动 Redis 服务</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">redis-server <span class="cm-comment"># 确保 Redis 已安装，并运行在默认端口 6379</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre></li><li><p><strong><span>后端启动</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cd</span> backend</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mvn spring-boot:run <span class="cm-comment"># 确保已配置数据库连接（application.yml）</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre></li><li><p><strong><span>前端启动</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cd</span> frontend</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">npm</span> install</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">npm</span> run dev</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>访问 </span><code>http://localhost:5174</code><span> 即可</span></p></li></ol><p>&nbsp;</p><h2 id='📌-使用说明'><span>📌 使用说明</span></h2><p><span>在线访问地址：</span><a href='http://8.138.214.176:5174' target='_blank' class='url'>http://8.138.214.176:5174</a></p><p><span>本地访问地址：</span><a href='http://localhost:5174' target='_blank' class='url'>http://localhost:5174</a></p><h3 id='➤-账号体系说明'><span>➤ 账号体系说明</span></h3><h4 id='1-注册账号'><span>1. 注册账号</span></h4><p><span>点击前往</span><strong><span>注册账号</span></strong></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-2.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-2.png"></p><p><strong><span>填写用户名，密码等相关信息</span></strong><span>后，再点击</span><strong><span>获取验证码</span></strong></p><p><span>大概半分钟后，系统就会发送验证码至你的邮箱</span></p><p><span>验证码三分钟之内有效，一分钟内不得重复获取验证码</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-3.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-3.png"></p><h4 id='2-登录界面'><span>2. 登录界面</span></h4><p><span>填写</span><strong><span>用户名 / 邮箱 + 密码</span></strong><span>进行登录</span></p><p><span>可以勾选</span><strong><span>记住我</span></strong><span>功能（用户在登录后的一段时间内，只要不退出登录，则不需要验证，就可以直接登录）</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-4.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-4.png"></p><h4 id='3-忘记密码'><span>3. 忘记密码</span></h4><p><span>点击前往</span><strong><span>忘记密码</span></strong><span>模块</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-5.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-5.png"></p><p><span>首先需要</span><strong><span>进行电子邮件的验证</span></strong><span>，依然是通过验证码的形式</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-6.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-6.png"></p><p><span>之后</span><strong><span>填写新密码</span></strong><span>即可</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-7.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-7.png"></p><h4 id='4-退出登录'><span>4. 退出登录</span></h4><p><span>主页，点击右上角的绿色按钮</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-8.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-8.png"></p><h4 id='5-注销账号'><span>5. 注销账号</span></h4><p><span>主页，点击左上角的红色按钮</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-9.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-9.png"></p><p><span>会出来一个确认窗口，点击确认即可</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-10.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-10.png"></p><h3 id='➤-各模块特殊说明'><span>➤ 各模块特殊说明</span></h3><h4 id='1-猜数字游戏'><span>1. 猜数字游戏</span></h4><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-11.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-11.png"></p><p><span>太简单了没啥好说的</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-12.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-12.png"></p><p><span>这里记录着你的最佳成绩</span></p><p><span>如果没有记录，则显示为 NULL</span></p><h4 id='2-角色自截图'><span>2. 角色自截图</span></h4><h5 id='功能入口'><span>功能入口</span></h5><p><span>当鼠标悬停在角色图片区域时，将触发交互式信息面板显示：</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-13.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-13.png"></p><p><em><span>界面要素说明：</span></em></p><ul><li><span>自动弹出角色简介卡片</span></li><li><span>显示两个功能按钮：【查看图片】和【下载图片】</span></li></ul><h5 id='功能操作流程'><span>功能操作流程</span></h5><ol start='' ><li><strong><span>查看完整图集</span></strong></li></ol><p><span>点击【查看图片】按钮后，系统将跳转至专用展示页面：</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-14.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-14.png"></p><p><em><span>页面特性：</span></em></p><ul><li><span>提供单张下载选项</span></li><li><span>包含图片元数据展示</span></li></ul><ol start='2' ><li><strong><span>批量下载操作</span></strong></li></ol><p><span>在悬停面板直接点击【下载图片】按钮：</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-15.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-15.png"></p><p><em><span>系统响应：</span></em></p><ul><li><span>自动下载角色专属压缩包（ZIP格式）</span></li><li><span>保持原始图片分辨率</span></li></ul><h5 id='下载文件处理'><span>下载文件处理</span></h5><p><span>成功下载的压缩包解压后效果：</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-16.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-16.png"></p><h4 id='3-连连看游戏'><span>3. 连连看游戏</span></h4><h5 id='游戏启动'><span>游戏启动</span></h5><p><span> 点击【开始游戏】后，系统将自动从游戏库中随机抽取n×n方阵</span></p><p><span>（注：当前版本暂未开放9×9至13×13尺寸方阵，问就是设计游戏图太烧脑了）</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-17.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-17.png"></p><h5 id='核心规则'><span>核心规则</span></h5><ol start='' ><li><p><strong><span>矩阵结构</span></strong><span>：采用n×n的矩阵布局，包含若干对同色图块</span></p></li><li><p><strong><span>连接要求</span></strong><span>：</span></p><ul><li><span>必须通过连续路径连接同色图块对</span></li><li><span>路径禁止发生交叉或重叠</span></li></ul></li><li><p><strong><span>胜利条件</span></strong><span>：当所有图块成功完成合法配对时，游戏自动结束</span></p></li></ol><h5 id='操作指南'><span>操作指南</span></h5><ol start='' ><li><p><strong><span>路径绘制</span></strong><span>：</span></p><ul><li><span>按住鼠标左键选定起点图块/路径端点</span></li><li><span>保持按压状态拖动至目标位置</span></li><li><span>松开左键完成路径连接</span></li></ul></li><li><p><strong><span>路径编辑</span></strong><span>：</span></p><ul><li><span>双击已绘制路径 → 删除该连接</span></li><li><span>双击已连接图块 → 删除其关联路径</span></li><li><span>（编辑模式专有）双击未连接图块 → 删除该图块</span></li></ul></li></ol><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-18.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-18.png"></p><h5 id='游戏库管理管理员权限）'><span>游戏库管理（管理员权限）</span></h5><ul><li><p><strong><span>功能入口</span></strong><span>：第0页为专用编辑工作区</span></p></li><li><p><strong><span>新建方阵</span></strong><span>：</span></p><ol start='' ><li><span>在编辑页设计合规矩阵</span></li><li><span>点击【提交】存入游戏库</span></li></ol></li><li><p><strong><span>修改现有</span></strong><span>：</span></p><ol start='' ><li><span>选择目标方阵所在页码</span></li><li><span>完成修改后必须执行【提交】操作</span></li><li><span>变更内容即时同步至游戏库</span></li></ol></li></ul><h4 id='4-简单爬虫脚本'><span>4. 简单爬虫脚本</span></h4><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-19.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-19.png"></p><h5 id='实现原理'><span>实现原理</span></h5><p><span>基于HTTP协议模拟浏览器请求，通过深度优先搜索算法遍历目标网站的所有可访问链接</span></p><p><span>当检测到重定向响应时，系统会自动跟踪跳转地址并递归执行抓取任务</span></p><h5 id='核心参数说明'><span>核心参数说明</span></h5><ul><li><strong><span>递归深度控制</span></strong>
<span>取值范围：1-10 层</span></li><li><strong><span>资源链接过滤</span></strong>
<span>启用&quot;解析下载链接&quot;选项后，只解析那些疑似可以下载的资源链接</span></li></ul><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-20.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-20.png"></p><h5 id='操作流程'><span>操作流程</span></h5><ol start='' ><li><p><strong><span>启动爬取</span></strong><span> </span>
<span>点击【开始解析】后，任务队列将显示实时抓取进度</span></p></li><li><p><strong><span>运行控制</span></strong><span>  </span></p><ul><li><span>点击【停止解析】立即停止当前任务</span></li><li><span>页面关闭或无网络响应时自动终止进程</span></li></ul></li><li><p><strong><span>结果交互</span></strong><span> </span>
<span>成功解析的链接将支持单击直接在新标签页打开</span></p></li></ol><h4 id='5-批量图片水印处理'><span>5. 批量图片水印处理</span></h4><h5 id='主操作界面'><span>主操作界面</span></h5><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-21.png?v=2" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-21.png"></p><p><span>界面布局包含以下功能区域（自上而下、从左至右排列）：</span></p><ol start='' ><li><strong><span>压缩文件上传区</span></strong><span> - 支持ZIP格式文件点击上传</span></li><li><strong><span>任务进度监控条</span></strong><span> - 实时显示批量处理进度百分比</span></li><li><strong><span>任务结果反馈栏</span></strong><span> - 处理完成后显示统计报表</span></li><li><strong><span>水印样式库</span></strong><span> - 预设样式及自定义样式存储区</span></li><li><strong><span>样式切换面板</span></strong><span> - 支持不同水印模板的即时切换</span></li><li><strong><span>参数配置面板</span></strong><span> - 调整水印位置/阴影/字体等属性</span></li><li><strong><span>实时预览窗口</span></strong><span> - 可视化展示当前水印效果</span></li></ol><h5 id='文件规范要求'><span>文件规范要求</span></h5><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-22.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-22.png"></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-23.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-23.png"></p><p><span>压缩包文件需满足以下技术规范：</span></p><ol start='' ><li><p><span>文件格式限定为ZIP标准压缩格式</span></p></li><li><p><span>压缩包内容要求：</span></p><ul><li><p><span>仅允许包含以下两种文件类型：</span></p><ul><li><span>JPEG格式图片（.jpg/.jpeg）</span></li><li><span>Excel数据表（.xlsx）</span></li></ul></li><li><p><span>禁止包含其他类型文件或嵌套压缩包</span></p></li></ul></li><li><p><span>图片处理规则配置说明</span></p><p><span>您的图片将根据以下表格规则自动处理（配置区域位于Excel的第一个工作表的A列开始，跳过首行）</span></p><p><strong><span>各列配置说明</span></strong><span>：</span></p><ul><li><span>A列（必填）图片唯一ID → 需与图片文件名图片文件名完全匹配</span></li><li><span>B列（选填）水印文字 → 留空则等于啥也没做</span></li><li><span>C列（选填）自定义文件名 → 留空时将自动使用A列的图片ID</span></li><li><span>D-</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 1000 453" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><defs><path id="MJX-2-TEX-N-221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="221E" xlink:href="#MJX-2-TEX-N-221E"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">∞</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">\infty</script><span>列（选填）分级目录 → 从D列开始向右连续填写目录层级</span></li></ul><p><strong><span>路径生成规则</span></strong><span>：</span></p><ol start='' ><li><span>目录结构：系统将自动串联D列及右侧连续的非空单元格作为路径 （示例：D2=2023，E2=Q3 → 生成路径 /2023/Q3/）</span></li><li><span>最终路径 = 目录路径 + &quot;/&quot; + [C列内容或A列ID] + 扩展名 （示例：当C2=宣传图 → /2023/Q3/宣传图.jpg）</span></li></ol><p><strong><span>错误处理机制</span></strong><span>：</span></p><p><span>❗ 当检测到以下情况时：</span></p><ul><li><span>路径包含非法字符（如 \ : * ? &quot; &lt; &gt; |）</span></li><li><span>超过系统路径长度限制</span></li><li><span>其他非法路径格式 </span></li></ul><p><span>📁 系统会自动保存到专用错误目录： ERROR-XXXXXXXX（示例：ERROR-4ab20ee1）</span></p><p><span>示例输出结果：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">modified</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── ERROR-4ab20ee1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── eee.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── fff.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── SPU-1111</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── 一室一厅</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── 商品展示图</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; └── 701.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── 三室一厅</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── 商品展示图</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; └── 701.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── 两室一厅</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; └── 商品展示图</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── 701.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── 一级目录</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── 二级目录</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; └── 三级目录</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── 四级目录</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── 五级目录</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── 六级目录</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── 七级目录</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── ddd.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">└── 统计报表.xlsx</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 530px;"></div><div class="CodeMirror-gutters" style="display: none; height: 530px;"></div></div></div></pre></li></ol><h5 id='处理结果解析'><span>处理结果解析</span></h5><ul><li><strong><span>匹配成功：</span></strong><span> 数据表与图片文件存在对应关系</span></li><li><strong><span>表匹配失败：</span></strong><span> 数据表中存在但无对应图片文件</span></li><li><strong><span>图匹配失败：</span></strong><span> 图片文件存在但无对应数据表记录</span></li></ul><p><strong><span>统计报表示例</span></strong></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-30.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-30.png"></p><h5 id='水印参数配置'><span>水印参数配置</span></h5><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-24.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-24.png"></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-25.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-25.png"></p><p><span>参数配置系统包含以下特性：</span></p><ol start='' ><li><p><strong><span>预设模板模式</span></strong><span>：</span></p><ul><li><span>参数锁定不可编辑</span></li><li><span>支持模板即时切换应用</span></li></ul></li><li><p><strong><span>自定义模式</span></strong><span>：</span></p><ul><li><span>实时预览：参数调整后立即显示效果</span></li><li><span>背景替换：支持上传自定义背景样式图</span></li><li><span>临时保存：编辑期间参数自动缓存</span></li><li><span>模板保存：点击【添加样式】永久存储配置</span></li></ul></li><li><p><strong><span>更新机制</span></strong><span>：</span></p><ul><li><span>非编辑状态下修改参数需点击【更新样式】生效</span></li><li><span>支持通过悬浮按钮删除自定义模板及预览背景</span></li></ul></li><li><p><strong><span>自定义字体设置：</span></strong></p><ul><li><span>如果系统中不存在指定字体，可以使用用户上传的字体文件</span></li></ul></li></ol><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-26.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-26.png"></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-27.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-27.png"></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-28.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-28.png"></p><h5 id='标准操作流程'><span>标准操作流程</span></h5><ol start='' ><li><p><strong><span>文件准备阶段</span></strong></p><p><span>按规范制作包含图片文件与数据表的ZIP压缩包</span></p></li><li><p><strong><span>样式配置阶段</span></strong></p><p><span>选择预设模板或创建自定义水印样式</span></p></li><li><p><strong><span>任务执行阶段</span></strong></p><ul><li><span>上传压缩文件后系统自动启动处理</span></li><li><span>通过进度条监控任务状态</span></li><li><span>完成100%后自动触发结果文件下载</span></li></ul></li></ol><p>&nbsp;</p><h2 id='🛠️-技术栈'><span>🛠️ 技术栈</span></h2><h3 id='后端-1'><span>后端</span></h3><ul><li><strong><span>框架</span></strong><span> ：Spring Boot、Spring MVC、Spring Security、MyBatis</span></li><li><strong><span>数据库</span></strong><span> ：MySQL、Redis</span></li><li><strong><span>第三方库</span></strong><span> ：Lombok、Java Mail Sender、Fastjson、Apache Commons Compress、Apache POI</span></li><li><strong><span>安全</span></strong><span> ：BCryptPasswordEncoder、Remember-Me</span></li><li><strong><span>工具与功能</span></strong><span> ：线程管理、图像处理、文件上传、全局异常处理</span></li></ul><h3 id='前端-1'><span>前端</span></h3><ul><li><p><strong><span>框架</span></strong><span> ：Vue 3</span></p></li><li><p><strong><span>状态管理</span></strong><span> ：Pinia</span></p></li><li><p><strong><span>UI 组件库</span></strong><span> ：Element Plus、Element Plus Icons</span></p></li><li><p><strong><span>路由</span></strong><span> ：Vue Router</span></p></li><li><p><strong><span>HTTP 请求库</span></strong><span> ：Axios</span></p></li><li><p><strong><span>构建工具</span></strong><span> ：Vite</span></p></li><li><p><strong><span>功能与工具</span></strong><span>：</span></p><ul><li><strong><span>图片懒加载</span></strong><span> ：Intersection Observer API（自定义指令 </span><code>v-lazy</code><span>）</span></li><li><strong><span>动画</span></strong><span> ：Element Plus 过渡动画（如 </span><code>&lt;transition&gt;</code><span> 组件）</span></li><li><strong><span>依赖注入</span></strong><span> ：Vue </span><code>inject</code><span>/</span><code>provide</code><span>（动态标题传递）</span></li><li><strong><span>复杂表单验证</span></strong><span> ：Element Plus 表单规则与自定义校验逻辑</span></li></ul></li></ul><p>&nbsp;</p><h2 id='✨技术栈亮点'><span>✨技术栈亮点</span></h2><h3 id='后端-2'><span>后端</span></h3><h4 id='1-安全架构设计spring-security--自定义拦截器）'><span>1. 安全架构设计（Spring Security + 自定义拦截器）</span></h4><p><strong><span>亮点描述：</span></strong></p><ul><li><strong><span>细粒度权限控制</span></strong><span>：通过 </span><code>SecurityConfiguration</code><span> 配置 Spring Security，实现 </span><code>/api/auth/**</code><span> 免认证、其他接口需认证访问，结合 </span><code>@EnableWebSecurity</code><span> 实现安全过滤链</span></li><li><strong><span>多态登录与退出</span></strong><span>：自定义登录接口 </span><code>/api/auth/login</code><span> 和退出接口 </span><code>/api/auth/logout</code><span>，通过 </span><code>successHandler</code><span> 和 </span><code>failureHandler</code><span> 返回友好 JSON 响应（如 </span><code>RestBean.success(&quot;登录成功&quot;)</code><span>）</span></li><li><strong><span>记住我功能</span></strong><span>：使用 </span><code>JdbcTokenRepositoryImpl</code><span> 持久化 Remember-Me 令牌，支持 15 天有效期</span></li><li><strong><span>CORS 跨域优化</span></strong><span>：通过 </span><code>CorsConfigurationSource</code><span> 允许所有来源请求，支持凭证传递（</span><code>allowCredentials: true</code><span>），避免前后端联调问题</span></li></ul><p><strong><span>代码片段：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Configuration</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@EnableWebSecurity</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">SecurityConfiguration</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Bean</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">SecurityFilterChain</span> <span class="cm-variable">filterChain</span>(<span class="cm-variable">HttpSecurity</span> <span class="cm-variable">http</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">Exception</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">http</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">authorizeHttpRequests</span>(<span class="cm-variable">e</span> <span class="cm-operator">-&gt;</span> <span class="cm-variable">e</span> <span class="cm-comment">// 免认证路径与权限控制</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">requestMatchers</span>(<span class="cm-string">"/api/auth/**"</span>).<span class="cm-variable">permitAll</span>() <span class="cm-comment">// 登录/注册接口免认证</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">anyRequest</span>().<span class="cm-variable">authenticated</span>() <span class="cm-comment">// 其他接口需认证</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">formLogin</span>(<span class="cm-variable">e</span> <span class="cm-operator">-&gt;</span> <span class="cm-variable">e</span> <span class="cm-comment">// 自定义登录退出逻辑</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">loginProcessingUrl</span>(<span class="cm-string">"/api/auth/login"</span>) <span class="cm-comment">// 自定义登录URL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">successHandler</span>(<span class="cm-keyword">this</span>::<span class="cm-variable">onAuthenticationSuccess</span>) <span class="cm-comment">// JSON格式响应</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">failureHandler</span>(<span class="cm-keyword">this</span>::<span class="cm-variable">onAuthenticationFailure</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">logout</span>(<span class="cm-variable">e</span> <span class="cm-operator">-&gt;</span> <span class="cm-variable">e</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">logoutUrl</span>(<span class="cm-string">"/api/auth/logout"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">logoutSuccessHandler</span>(<span class="cm-keyword">this</span>::<span class="cm-variable">onAuthenticationSuccess</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">rememberMe</span>(<span class="cm-variable">e</span> <span class="cm-operator">-&gt;</span> <span class="cm-variable">e</span> <span class="cm-comment">// 记住我功能（15天有效期）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">tokenValiditySeconds</span>(<span class="cm-number">3600</span> <span class="cm-operator">*</span> <span class="cm-number">24</span> <span class="cm-operator">*</span> <span class="cm-number">15</span>) <span class="cm-comment">// 令牌有效期</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">tokenRepository</span>(<span class="cm-variable">tokenRepository</span>()) <span class="cm-comment">// 使用JDBC持久化令牌</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">cors</span>(<span class="cm-variable">e</span> <span class="cm-operator">-&gt;</span> <span class="cm-variable">e</span>.<span class="cm-variable">configurationSource</span>(<span class="cm-variable">corsConfigurationSource</span>())) <span class="cm-comment">// CORS全局配置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">exceptionHandling</span>(<span class="cm-variable">e</span> <span class="cm-operator">-&gt;</span> <span class="cm-variable">e</span>.<span class="cm-variable">authenticationEntryPoint</span>(<span class="cm-keyword">this</span>::<span class="cm-variable">onAuthenticationFailure</span>)) <span class="cm-comment">// 统一异常处理</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">build</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 668px;"></div><div class="CodeMirror-gutters" style="display: none; height: 668px;"></div></div></div></pre><h4 id='2-复杂业务场景的异步处理多线程--任务监控）'><span>2. 复杂业务场景的异步处理（多线程 + 任务监控）</span></h4><p><strong><span>亮点描述：</span></strong></p><ul><li><strong><span>线程池替代原生线程</span></strong><span>：在 </span><code>BatchImageWatermarkerServiceImpl</code><span> 中使用 </span><code>ThreadPoolExecutor</code><span> 管理任务线程，支持动态调整线程数（核心线程数 2，最大 6）和任务队列（容量 10），避免资源耗尽风险</span></li><li><strong><span>任务进度与结果管理</span></strong><span>：通过 </span><code>ConcurrentHashMap</code><span> 缓存任务进度（</span><code>P</code><span>）、生成文件（</span><code>ZIP</code><span>）和附加信息（</span><code>INFO</code><span>），提供 </span><code>/get-progress</code><span> 和 </span><code>/get-zip-file</code><span> 接口实时查询</span></li><li><strong><span>Future 实现任务可控性</span></strong><span>：通过 </span><code>Future&lt;?&gt;</code><span> 对象和 </span><code>ConcurrentHashMap</code><span> 缓存任务状态，</span><code>stopTask</code><span> 方法调用 </span><code>future.cancel(true)</code><span> 实现更精准的任务终止，且通过统一的 </span><code>cleanupResources</code><span> 清理资源，防止内存泄漏</span></li><li><strong><span>临时文件生命周期管理</span></strong><span>：新增 </span><code>cleanupTempFiles</code><span> 定时任务（每小时执行），自动清理超过 1 小时的临时 ZIP 文件，避免磁盘空间浪费</span></li></ul><p><strong><span>代码片段：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Slf4j</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Service</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">BatchImageWatermarkerServiceImpl</span> <span class="cm-keyword">implements</span> <span class="cm-variable">BatchImageWatermarkerService</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable">Future</span><span class="cm-operator">&lt;?&gt;&gt;</span> <span class="cm-variable">T</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ConcurrentHashMap</span><span class="cm-operator">&lt;&gt;</span>(); <span class="cm-comment">// 线程缓存</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable-3">Integer</span><span class="cm-operator">&gt;</span> <span class="cm-variable">P</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ConcurrentHashMap</span><span class="cm-operator">&lt;&gt;</span>(); <span class="cm-comment">// 进度缓存</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable">File</span><span class="cm-operator">&gt;</span> <span class="cm-variable">ZIP</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ConcurrentHashMap</span><span class="cm-operator">&lt;&gt;</span>(); <span class="cm-comment">// 文件缓存</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable">Set</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-variable">INFO</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ConcurrentHashMap</span><span class="cm-operator">&lt;&gt;</span>(); <span class="cm-comment">// 信息缓存</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">ExecutorService</span> <span class="cm-variable">executor</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ThreadPoolExecutor</span>( <span class="cm-comment">// 线程池</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">6</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">30</span>, <span class="cm-variable">TimeUnit</span>.<span class="cm-variable">SECONDS</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">ArrayBlockingQueue</span><span class="cm-operator">&lt;&gt;</span>(<span class="cm-number">10</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">new</span> <span class="cm-variable">ThreadPoolExecutor</span>.<span class="cm-variable">CallerRunsPolicy</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">startTask</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">username</span>, <span class="cm-variable">InputStream</span> <span class="cm-variable">fileStream</span>, <span class="cm-variable">WatermarkParams</span> <span class="cm-variable">params</span>, <span class="cm-variable">Image</span> <span class="cm-variable">backgroundImage</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cleanupResources</span>(<span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Future</span><span class="cm-operator">&lt;?&gt;</span> <span class="cm-variable">future</span> <span class="cm-operator">=</span> <span class="cm-variable">executor</span>.<span class="cm-variable">submit</span>(() <span class="cm-operator">-&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">try</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">handleFileUpload</span>(<span class="cm-variable">username</span>, <span class="cm-variable">fileStream</span>, <span class="cm-variable">params</span>, <span class="cm-variable">backgroundImage</span>); <span class="cm-comment">// 处理图片并生成水印</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">catch</span> (<span class="cm-variable">Exception</span> <span class="cm-variable">e</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cleanupResources</span>(<span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">log</span>.<span class="cm-variable">error</span>(<span class="cm-string">"进程崩溃：{}"</span>, <span class="cm-variable">e</span>.<span class="cm-variable">getMessage</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">RuntimeException</span>(<span class="cm-variable">e</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">T</span>.<span class="cm-variable">put</span>(<span class="cm-variable">username</span>, <span class="cm-variable">future</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">void</span> <span class="cm-variable">cleanupResources</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">username</span>) { <span class="cm-comment">// 清理任务资源</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">P</span>.<span class="cm-variable">remove</span>(<span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">T</span>.<span class="cm-variable">remove</span>(<span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">INFO</span>.<span class="cm-variable">remove</span>(<span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ZIP</span>.<span class="cm-variable">remove</span>(<span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">getProgress</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">username</span>) { <span class="cm-comment">// 获取进度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">P</span>.<span class="cm-variable">getOrDefault</span>(<span class="cm-variable">username</span>, <span class="cm-number">0</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">ResponseEntity</span><span class="cm-operator">&lt;</span><span class="cm-variable">InputStreamResource</span><span class="cm-operator">&gt;</span> <span class="cm-variable">getZipFile</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">username</span>) { <span class="cm-comment">// 获取文件结果</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">File</span> <span class="cm-variable">file</span> <span class="cm-operator">=</span> <span class="cm-variable">ZIP</span>.<span class="cm-variable">getOrDefault</span>(<span class="cm-variable">username</span>, <span class="cm-atom">null</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">try</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">ResponseEntity</span>.<span class="cm-variable">ok</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">header</span>(<span class="cm-variable">HttpHeaders</span>.<span class="cm-variable">CONTENT_DISPOSITION</span>, <span class="cm-string">"attachment; filename=modified.zip"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">contentType</span>(<span class="cm-variable">MediaType</span>.<span class="cm-variable">APPLICATION_OCTET_STREAM</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">body</span>(<span class="cm-keyword">new</span> <span class="cm-variable">InputStreamResource</span>(<span class="cm-keyword">new</span> <span class="cm-variable">FileInputStream</span>(<span class="cm-variable">file</span>)));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">catch</span> (<span class="cm-variable">Exception</span> <span class="cm-variable">e</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">ResponseEntity</span>.<span class="cm-variable">internalServerError</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">body</span>(<span class="cm-keyword">new</span> <span class="cm-variable">InputStreamResource</span>(<span class="cm-keyword">new</span> <span class="cm-variable">ByteArrayInputStream</span>(<span class="cm-string">"{\"message\":\"服务器内部错误\"}"</span>.<span class="cm-variable">getBytes</span>())));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable">Set</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">getAdditionalData</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">username</span>) { <span class="cm-comment">// 获取附加信息</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">INFO</span>.<span class="cm-variable">getOrDefault</span>(<span class="cm-variable">username</span>, <span class="cm-atom">null</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">stopTask</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">username</span>) { <span class="cm-comment">// 终止任务</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Future</span><span class="cm-operator">&lt;?&gt;</span> <span class="cm-variable">future</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>.<span class="cm-variable">get</span>(<span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">future</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) <span class="cm-variable">future</span>.<span class="cm-variable">cancel</span>(<span class="cm-atom">true</span>); <span class="cm-comment">// 安全终止线程</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cleanupResources</span>(<span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Scheduled</span>(<span class="cm-variable">fixedRate</span> <span class="cm-operator">=</span> <span class="cm-number">3600</span> <span class="cm-operator">*</span> <span class="cm-number">1000</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">cleanupTempFiles</span>() { <span class="cm-comment">// 定时清理过期临时文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">String</span> <span class="cm-variable">tmpDirPath</span> <span class="cm-operator">=</span> <span class="cm-variable">System</span>.<span class="cm-variable">getProperty</span>(<span class="cm-string">"java.io.tmpdir"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">File</span> <span class="cm-variable">tempDir</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">File</span>(<span class="cm-variable">tmpDirPath</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">File</span>[] <span class="cm-variable">files</span> <span class="cm-operator">=</span> <span class="cm-variable">tempDir</span>.<span class="cm-variable">listFiles</span>((<span class="cm-variable">dir</span>, <span class="cm-variable">name</span>) <span class="cm-operator">-&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>.<span class="cm-variable">toLowerCase</span>().<span class="cm-variable">startsWith</span>(<span class="cm-string">"output"</span>) <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">name</span>.<span class="cm-variable">toLowerCase</span>().<span class="cm-variable">endsWith</span>(<span class="cm-string">".zip"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">files</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">long</span> <span class="cm-variable">now</span> <span class="cm-operator">=</span> <span class="cm-variable">System</span>.<span class="cm-variable">currentTimeMillis</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">File</span> <span class="cm-variable">file</span> : <span class="cm-variable">files</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">try</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">now</span> <span class="cm-operator">-</span> <span class="cm-variable">file</span>.<span class="cm-variable">lastModified</span>() <span class="cm-operator">&gt;</span> <span class="cm-number">3600</span> <span class="cm-operator">*</span> <span class="cm-number">1000</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">boolean</span> <span class="cm-variable">deleted</span> <span class="cm-operator">=</span> <span class="cm-variable">file</span>.<span class="cm-variable">delete</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">deleted</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">log</span>.<span class="cm-variable">info</span>(<span class="cm-string">"已清理过期临时文件: {}"</span>, <span class="cm-variable">file</span>.<span class="cm-variable">getAbsolutePath</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">log</span>.<span class="cm-variable">error</span>(<span class="cm-string">"文件清理失败: {}"</span>, <span class="cm-variable">file</span>.<span class="cm-variable">getAbsolutePath</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">catch</span> (<span class="cm-variable">SecurityException</span> <span class="cm-variable">e</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">log</span>.<span class="cm-variable">error</span>(<span class="cm-string">"权限不足，无法删除文件: {}"</span>, <span class="cm-variable">file</span>.<span class="cm-variable">getAbsolutePath</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2257px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2257px;"></div></div></div></pre><h4 id='3-数据层的高效设计mybatis--分层映射）'><span>3. 数据层的高效设计（MyBatis + 分层映射）</span></h4><p><strong><span>亮点描述：</span></strong></p><ul><li><strong><span>MyBatis 与 Spring Boot 的无缝集成</span></strong><span>：通过 </span><code>@Mapper</code><span> 注解实现简洁的数据库操作（如 </span><code>UserMapper</code><span> 的 </span><code>createAccount</code><span> 方法）</span></li><li><strong><span>DTO-Entity 转换</span></strong><span>：在 </span><code>WatermarkParamsConvert</code><span> 中定义 </span><code>toDTO</code><span> 和 </span><code>toEntity</code><span> 方法，解耦传输对象（DTO）与实体（Entity），提升代码可维护性</span></li><li><strong><span>复杂业务参数的序列化</span></strong><span>：将 </span><code>WatermarkParams</code><span> 对象序列化为 JSON 存储（如 </span><code>WatermarkData</code><span> 的 </span><code>json</code><span> 字段），简化数据库设计</span></li></ul><p><strong><span>代码片段：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Mapper</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">UserMapper</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Insert</span>(<span class="cm-string">"insert into account (email, username, password) values (#{email}, #{username}, #{password})"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">createAccount</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">username</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">password</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">email</span>); <span class="cm-comment">// 创建用户</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">WatermarkParamsConvert</span> { <span class="cm-comment">// 实现传输对象与实体的相互转换</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable">WatermarkDataDTO</span> <span class="cm-variable">toDTO</span>(<span class="cm-variable">WatermarkData</span> <span class="cm-variable">w</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">WatermarkDataDTO</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">w</span>.<span class="cm-variable">getId</span>(), <span class="cm-variable">w</span>.<span class="cm-variable">getUsername</span>(), <span class="cm-variable">toBase64</span>(<span class="cm-variable">w</span>.<span class="cm-variable">getBackgroundImage</span>()), <span class="cm-variable">toBase64</span>(<span class="cm-variable">w</span>.<span class="cm-variable">getPreviewImage</span>()),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">JSON</span>.<span class="cm-variable">parseObject</span>(<span class="cm-variable">w</span>.<span class="cm-variable">getJson</span>(), <span class="cm-keyword">new</span> <span class="cm-variable">TypeReference</span><span class="cm-operator">&lt;</span><span class="cm-variable">WatermarkParamsDTO</span><span class="cm-operator">&gt;</span>() {})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable">WatermarkData</span> <span class="cm-variable">toEntity</span>(<span class="cm-variable">WatermarkDataDTO</span> <span class="cm-variable">w</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">WatermarkData</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">w</span>.<span class="cm-variable">getId</span>(), <span class="cm-variable">w</span>.<span class="cm-variable">getUsername</span>(), <span class="cm-variable">toBytes</span>(<span class="cm-variable">w</span>.<span class="cm-variable">getBackgroundImage</span>()), <span class="cm-variable">toBytes</span>(<span class="cm-variable">w</span>.<span class="cm-variable">getPreviewImage</span>()),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">JSON</span>.<span class="cm-variable">toJSONString</span>(<span class="cm-variable">w</span>.<span class="cm-variable">getParams</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 369px;"></div><div class="CodeMirror-gutters" style="display: none; height: 369px;"></div></div></div></pre><h4 id='4-异常处理与容错机制'><span>4. 异常处理与容错机制</span></h4><p><strong><span>亮点描述：</span></strong></p><ul><li><strong><span>全局异常捕获</span></strong><span>：通过 </span><code>@ControllerAdvice</code><span> 统一处理 </span><code>IllegalArgumentException</code><span> 和自定义异常（如 </span><code>FontNotFoundException</code><span>），返回结构化错误信息（如 </span><code>{&quot;type&quot;: &quot;FontNotFoundException&quot;, &quot;message&quot;: &quot;字体未安装&quot;}</code><span>）</span></li><li><strong><span>参数校验</span></strong><span>：在 </span><code>AuthorizeController</code><span> 中使用 </span><code>@Pattern</code><span>、</span><code>@Length</code><span> 等注解进行参数校验，结合 </span><code>@Validated</code><span> 实现输入合法性检查</span></li></ul><p><strong><span>代码片段：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@ControllerAdvice</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">GlobalExceptionHandler</span> { <span class="cm-comment">// 全局异常处理器</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@ExceptionHandler</span>(<span class="cm-variable">IllegalArgumentException</span>.<span class="cm-keyword">class</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">ResponseEntity</span><span class="cm-operator">&lt;</span><span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable-3">Object</span><span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">handleRuntimeException</span>(<span class="cm-variable">IllegalArgumentException</span> <span class="cm-variable">e</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable-3">Object</span><span class="cm-operator">&gt;</span> <span class="cm-variable">errorResponse</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span><span class="cm-operator">&lt;&gt;</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">errorResponse</span>.<span class="cm-variable">put</span>(<span class="cm-string">"type"</span>, <span class="cm-string">"IllegalArgumentException"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">errorResponse</span>.<span class="cm-variable">put</span>(<span class="cm-string">"message"</span>, <span class="cm-variable">e</span>.<span class="cm-variable">getMessage</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">errorResponse</span>.<span class="cm-variable">put</span>(<span class="cm-string">"status"</span>, <span class="cm-variable">HttpStatus</span>.<span class="cm-variable">INTERNAL_SERVER_ERROR</span>.<span class="cm-variable">value</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">ResponseEntity</span>.<span class="cm-variable">status</span>(<span class="cm-variable">HttpStatus</span>.<span class="cm-variable">INTERNAL_SERVER_ERROR</span>).<span class="cm-variable">body</span>(<span class="cm-variable">errorResponse</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Validated</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@RestController</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@RequestMapping</span>(<span class="cm-string">"/api/auth"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">AuthorizeController</span> { <span class="cm-comment">// 用户认证控制器</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">String</span> <span class="cm-variable">EMAIL_REGEX</span> <span class="cm-operator">=</span> <span class="cm-string">"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">String</span> <span class="cm-variable">USERNAME_REGEX</span> <span class="cm-operator">=</span> <span class="cm-string">"^[a-zA-Z0-9\\u4e00-\\u9fa5]+$"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@PostMapping</span>(<span class="cm-string">"/register"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">RestBean</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">registerUser</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Pattern</span>(<span class="cm-variable">regexp</span> <span class="cm-operator">=</span> <span class="cm-variable">USERNAME_REGEX</span>) <span class="cm-meta">@Length</span>(<span class="cm-variable">min</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">max</span> <span class="cm-operator">=</span> <span class="cm-number">8</span>) <span class="cm-meta">@RequestParam</span>(<span class="cm-string">"username"</span>) <span class="cm-variable-3">String</span> <span class="cm-variable">username</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Length</span>(<span class="cm-variable">min</span> <span class="cm-operator">=</span> <span class="cm-number">6</span>, <span class="cm-variable">max</span> <span class="cm-operator">=</span> <span class="cm-number">16</span>) <span class="cm-meta">@RequestParam</span>(<span class="cm-string">"password"</span>) <span class="cm-variable-3">String</span> <span class="cm-variable">password</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Pattern</span>(<span class="cm-variable">regexp</span> <span class="cm-operator">=</span> <span class="cm-variable">EMAIL_REGEX</span>) <span class="cm-meta">@RequestParam</span>(<span class="cm-string">"email"</span>) <span class="cm-variable-3">String</span> <span class="cm-variable">email</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Length</span>(<span class="cm-variable">min</span> <span class="cm-operator">=</span> <span class="cm-number">6</span>, <span class="cm-variable">max</span> <span class="cm-operator">=</span> <span class="cm-number">6</span>) <span class="cm-meta">@RequestParam</span>(<span class="cm-string">"code"</span>) <span class="cm-variable-3">String</span> <span class="cm-variable">code</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">HttpSession</span> <span class="cm-variable">session</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">String</span> <span class="cm-variable">s</span> <span class="cm-operator">=</span> <span class="cm-variable">service</span>.<span class="cm-variable">validateAndRegister</span>(<span class="cm-variable">username</span>, <span class="cm-variable">password</span>, <span class="cm-variable">email</span>, <span class="cm-variable">code</span>, <span class="cm-variable">session</span>.<span class="cm-variable">getId</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">s</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) <span class="cm-keyword">return</span> <span class="cm-variable">RestBean</span>.<span class="cm-variable">success</span>(<span class="cm-string">"注册成功"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">return</span> <span class="cm-variable">RestBean</span>.<span class="cm-variable">failure</span>(<span class="cm-number">400</span>, <span class="cm-variable">s</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 484px;"></div><div class="CodeMirror-gutters" style="display: none; height: 484px;"></div></div></div></pre><h4 id='5-图像处理与性能优化'><span>5. 图像处理与性能优化</span></h4><p><strong><span>亮点描述：</span></strong></p><ul><li><strong><span>图片水印算法</span></strong><span>：在 </span><code>ImageUtil</code><span> 中实现复杂水印逻辑（如背景图层、渐变色、描边、阴影、仿射变换），支持自定义字体（通过 </span><code>Font.createFont</code><span> 动态加载 TTF 文件）</span></li><li><strong><span>零中间文件的 ZIP 流式生成</span></strong><span>：基于 </span><code>ZipArchiveOutputStream</code><span> 实现内存到 ZIP 的直写流水线，图像处理后直接通过流式 API 写入压缩包，避免磁盘临时文件周转，降低 IO 开销</span></li><li><strong><span>线程安全的临时文件管理</span></strong><span>：通过 </span><code>FileUtil.deleteDirectory</code><span> 递归删除临时目录，确保资源及时释放</span></li></ul><p><strong><span>代码片段：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ImageUtil</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable">BufferedImage</span> <span class="cm-variable">handleWatermark</span>(<span class="cm-variable">WatermarkParams</span> <span class="cm-variable">p</span>, <span class="cm-variable">Image</span> <span class="cm-variable">image</span>, <span class="cm-variable">Image</span> <span class="cm-variable">backgroundImage</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">watermark</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">IOException</span>, <span class="cm-variable">FontNotFoundException</span> { <span class="cm-comment">// 处理图片水印</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-variable">image</span>.<span class="cm-variable">getWidth</span>(<span class="cm-atom">null</span>), <span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-variable">image</span>.<span class="cm-variable">getHeight</span>(<span class="cm-atom">null</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">BufferedImage</span> <span class="cm-variable">bufferedImage</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">BufferedImage</span>(<span class="cm-variable">width</span>, <span class="cm-variable">height</span>, <span class="cm-variable">BufferedImage</span>.<span class="cm-variable">TYPE_INT_RGB</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Graphics2D</span> <span class="cm-variable">g</span> <span class="cm-operator">=</span> <span class="cm-variable">bufferedImage</span>.<span class="cm-variable">createGraphics</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setColor</span>(<span class="cm-variable">Color</span>.<span class="cm-variable">WHITE</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">fillRect</span>(<span class="cm-number">0</span>, <span class="cm-number">0</span>, <span class="cm-variable">width</span>, <span class="cm-variable">height</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">drawImage</span>(<span class="cm-variable">image</span>, <span class="cm-number">0</span>, <span class="cm-number">0</span>, <span class="cm-variable">width</span>, <span class="cm-variable">height</span>, <span class="cm-atom">null</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">backgroundImage</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) { <span class="cm-comment">// 背景图层</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">BufferedImage</span> <span class="cm-variable">styleImage</span> <span class="cm-operator">=</span> <span class="cm-variable">toBufferedImage</span>(<span class="cm-variable">backgroundImage</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">styleWidth</span> <span class="cm-operator">=</span> <span class="cm-variable">styleImage</span>.<span class="cm-variable">getWidth</span>(), <span class="cm-variable">styleHeight</span> <span class="cm-operator">=</span> <span class="cm-variable">styleImage</span>.<span class="cm-variable">getHeight</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">minWidth</span> <span class="cm-operator">=</span> <span class="cm-variable">Math</span>.<span class="cm-variable">min</span>(<span class="cm-variable">width</span>, <span class="cm-variable">styleWidth</span>), <span class="cm-variable">minHeight</span> <span class="cm-operator">=</span> <span class="cm-variable">Math</span>.<span class="cm-variable">min</span>(<span class="cm-variable">height</span>, <span class="cm-variable">styleHeight</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span>[] <span class="cm-variable">stylePixels</span> <span class="cm-operator">=</span> ((<span class="cm-variable">DataBufferInt</span>) <span class="cm-variable">styleImage</span>.<span class="cm-variable">getRaster</span>().<span class="cm-variable">getDataBuffer</span>()).<span class="cm-variable">getData</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span>[] <span class="cm-variable">destPixels</span> <span class="cm-operator">=</span> ((<span class="cm-variable">DataBufferInt</span>) <span class="cm-variable">bufferedImage</span>.<span class="cm-variable">getRaster</span>().<span class="cm-variable">getDataBuffer</span>()).<span class="cm-variable">getData</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">y</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">minHeight</span>; <span class="cm-variable">y</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">styleRowOffset</span> <span class="cm-operator">=</span> <span class="cm-variable">y</span> <span class="cm-operator">*</span> <span class="cm-variable">styleWidth</span>, <span class="cm-variable">destRowOffset</span> <span class="cm-operator">=</span> <span class="cm-variable">y</span> <span class="cm-operator">*</span> <span class="cm-variable">width</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">x</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">minWidth</span>; <span class="cm-variable">x</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">stylePixel</span> <span class="cm-operator">=</span> <span class="cm-variable">stylePixels</span>[<span class="cm-variable">styleRowOffset</span> <span class="cm-operator">+</span> <span class="cm-variable">x</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">styleAlpha</span> <span class="cm-operator">=</span> (<span class="cm-variable">stylePixel</span> <span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-number">24</span>) <span class="cm-operator">&amp;</span> <span class="cm-number">0xFF</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">styleAlpha</span> <span class="cm-operator">!=</span> <span class="cm-number">0</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">destPixel</span> <span class="cm-operator">=</span> <span class="cm-variable">destPixels</span>[<span class="cm-variable">destRowOffset</span> <span class="cm-operator">+</span> <span class="cm-variable">x</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">blendedPixel</span> <span class="cm-operator">=</span> <span class="cm-variable">getBlendedPixel</span>(<span class="cm-variable">destPixel</span>, <span class="cm-variable">stylePixel</span>, <span class="cm-variable">styleAlpha</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">destPixels</span>[<span class="cm-variable">destRowOffset</span> <span class="cm-operator">+</span> <span class="cm-variable">x</span>] <span class="cm-operator">=</span> <span class="cm-variable">blendedPixel</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setRenderingHint</span>(<span class="cm-variable">RenderingHints</span>.<span class="cm-variable">KEY_TEXT_ANTIALIASING</span>, <span class="cm-variable">RenderingHints</span>.<span class="cm-variable">VALUE_TEXT_ANTIALIAS_ON</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Font</span> <span class="cm-variable">font</span> <span class="cm-operator">=</span> <span class="cm-variable">getFont</span>(<span class="cm-variable">p</span>.<span class="cm-variable">getFontName</span>(), <span class="cm-variable">p</span>.<span class="cm-variable">getFontStyles</span>(), <span class="cm-variable">p</span>.<span class="cm-variable">getFontSize</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">font</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) <span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">FontNotFoundException</span>(<span class="cm-string">"字体 ["</span> <span class="cm-operator">+</span> <span class="cm-variable">p</span>.<span class="cm-variable">getFontName</span>() <span class="cm-operator">+</span> <span class="cm-string">"] 未安装在系统中"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setFont</span>(<span class="cm-variable">font</span>); <span class="cm-comment">// 字体</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">FontMetrics</span> <span class="cm-variable">fm</span> <span class="cm-operator">=</span> <span class="cm-variable">g</span>.<span class="cm-variable">getFontMetrics</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getRotation</span>() <span class="cm-operator">!=</span> <span class="cm-number">0</span> <span class="cm-operator">||</span> <span class="cm-variable">p</span>.<span class="cm-variable">getShearX</span>() <span class="cm-operator">!=</span> <span class="cm-number">0</span>) { <span class="cm-comment">// 仿射变换</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">transform</span>(<span class="cm-variable">getAffineTransform</span>(<span class="cm-variable">p</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getShadowOpacity</span>() <span class="cm-operator">!=</span> <span class="cm-number">0</span>) { <span class="cm-comment">// 投影</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Composite</span> <span class="cm-variable">originalComposite</span> <span class="cm-operator">=</span> <span class="cm-variable">g</span>.<span class="cm-variable">getComposite</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setComposite</span>(<span class="cm-variable">AlphaComposite</span>.<span class="cm-variable">getInstance</span>(<span class="cm-variable">AlphaComposite</span>.<span class="cm-variable">SRC_OVER</span>, <span class="cm-variable">p</span>.<span class="cm-variable">getShadowOpacity</span>()));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setColor</span>(<span class="cm-variable">p</span>.<span class="cm-variable">getShadowColor</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">getX</span>() <span class="cm-operator">+</span> <span class="cm-variable">p</span>.<span class="cm-variable">getShadowDx</span>(), <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">getY</span>() <span class="cm-operator">+</span> <span class="cm-variable">p</span>.<span class="cm-variable">getShadowDy</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">watermark</span>.<span class="cm-variable">length</span>(); <span class="cm-variable">i</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">char</span> <span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">watermark</span>.<span class="cm-variable">charAt</span>(<span class="cm-variable">i</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">drawString</span>(<span class="cm-variable-3">String</span>.<span class="cm-variable">valueOf</span>(<span class="cm-variable">c</span>), <span class="cm-variable">x</span>, <span class="cm-variable">y</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">x</span> <span class="cm-operator">+=</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getIncludeCharWidthInDx</span>() <span class="cm-operator">?</span> <span class="cm-variable">fm</span>.<span class="cm-variable">charWidth</span>(<span class="cm-variable">c</span>) : <span class="cm-number">0</span>) <span class="cm-operator">+</span> <span class="cm-variable">p</span>.<span class="cm-variable">getDx</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">y</span> <span class="cm-operator">+=</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getIncludeCharHeightInDy</span>() <span class="cm-operator">?</span> <span class="cm-variable">fm</span>.<span class="cm-variable">getAscent</span>() : <span class="cm-number">0</span>) <span class="cm-operator">+</span> <span class="cm-variable">p</span>.<span class="cm-variable">getDy</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setComposite</span>(<span class="cm-variable">originalComposite</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getStrokeSize</span>() <span class="cm-operator">!=</span> <span class="cm-number">0</span>) { <span class="cm-comment">// 描边</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getStrokeGradient</span>() <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">WatermarkParams</span>.<span class="cm-variable">GradientParams</span> <span class="cm-variable">gp</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">getStrokeGradient</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setPaint</span>(<span class="cm-keyword">new</span> <span class="cm-variable">GradientPaint</span>(<span class="cm-variable">gp</span>.<span class="cm-variable">getStart</span>(), <span class="cm-variable">gp</span>.<span class="cm-variable">getStartColor</span>(), <span class="cm-variable">gp</span>.<span class="cm-variable">getEnd</span>(), <span class="cm-variable">gp</span>.<span class="cm-variable">getEndColor</span>(), <span class="cm-variable">gp</span>.<span class="cm-variable">getCyclic</span>()));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setColor</span>(<span class="cm-variable">p</span>.<span class="cm-variable">getStrokeColor</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">getX</span>(), <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">getY</span>(), <span class="cm-variable">gap</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">getStrokeSize</span>(); <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">watermark</span>.<span class="cm-variable">length</span>(); <span class="cm-variable">i</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">char</span> <span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">watermark</span>.<span class="cm-variable">charAt</span>(<span class="cm-variable">i</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">j</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-variable">gap</span>; <span class="cm-variable">j</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">gap</span>; <span class="cm-variable">j</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-variable">gap</span>; <span class="cm-variable">k</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">gap</span>; <span class="cm-variable">k</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">drawString</span>(<span class="cm-variable-3">String</span>.<span class="cm-variable">valueOf</span>(<span class="cm-variable">c</span>), <span class="cm-variable">x</span> <span class="cm-operator">+</span> <span class="cm-variable">j</span>, <span class="cm-variable">y</span> <span class="cm-operator">+</span> <span class="cm-variable">k</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">x</span> <span class="cm-operator">+=</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getIncludeCharWidthInDx</span>() <span class="cm-operator">?</span> <span class="cm-variable">fm</span>.<span class="cm-variable">charWidth</span>(<span class="cm-variable">c</span>) : <span class="cm-number">0</span>) <span class="cm-operator">+</span> <span class="cm-variable">p</span>.<span class="cm-variable">getDx</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">y</span> <span class="cm-operator">+=</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getIncludeCharHeightInDy</span>() <span class="cm-operator">?</span> <span class="cm-variable">fm</span>.<span class="cm-variable">getAscent</span>() : <span class="cm-number">0</span>) <span class="cm-operator">+</span> <span class="cm-variable">p</span>.<span class="cm-variable">getDy</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getFontGradient</span>() <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) { <span class="cm-comment">// 渐变</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">WatermarkParams</span>.<span class="cm-variable">GradientParams</span> <span class="cm-variable">gp</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">getFontGradient</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setPaint</span>(<span class="cm-keyword">new</span> <span class="cm-variable">GradientPaint</span>(<span class="cm-variable">gp</span>.<span class="cm-variable">getStart</span>(), <span class="cm-variable">gp</span>.<span class="cm-variable">getStartColor</span>(), <span class="cm-variable">gp</span>.<span class="cm-variable">getEnd</span>(), <span class="cm-variable">gp</span>.<span class="cm-variable">getEndColor</span>(), <span class="cm-variable">gp</span>.<span class="cm-variable">getCyclic</span>()));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">setColor</span>(<span class="cm-variable">p</span>.<span class="cm-variable">getFontColor</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">getX</span>(), <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>.<span class="cm-variable">getY</span>(); <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">watermark</span>.<span class="cm-variable">length</span>(); <span class="cm-variable">i</span><span class="cm-operator">++</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">char</span> <span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">watermark</span>.<span class="cm-variable">charAt</span>(<span class="cm-variable">i</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">drawString</span>(<span class="cm-variable-3">String</span>.<span class="cm-variable">valueOf</span>(<span class="cm-variable">c</span>), <span class="cm-variable">x</span>, <span class="cm-variable">y</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">x</span> <span class="cm-operator">+=</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getIncludeCharWidthInDx</span>() <span class="cm-operator">?</span> <span class="cm-variable">fm</span>.<span class="cm-variable">charWidth</span>(<span class="cm-variable">c</span>) : <span class="cm-number">0</span>) <span class="cm-operator">+</span> <span class="cm-variable">p</span>.<span class="cm-variable">getDx</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">y</span> <span class="cm-operator">+=</span> (<span class="cm-variable">p</span>.<span class="cm-variable">getIncludeCharHeightInDy</span>() <span class="cm-operator">?</span> <span class="cm-variable">fm</span>.<span class="cm-variable">getAscent</span>() : <span class="cm-number">0</span>) <span class="cm-operator">+</span> <span class="cm-variable">p</span>.<span class="cm-variable">getDy</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">g</span>.<span class="cm-variable">dispose</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">bufferedImage</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1981px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1981px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.42383px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">handleFileUpload</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">username</span>, <span class="cm-variable">InputStream</span> <span class="cm-variable">fileStream</span>, <span class="cm-variable">WatermarkParams</span> <span class="cm-variable">params</span>, <span class="cm-variable">Image</span> <span class="cm-variable">backgroundImage</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">IOException</span>, <span class="cm-variable">InterruptedException</span>, <span class="cm-variable">FontNotFoundException</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">File</span> <span class="cm-variable">input</span> <span class="cm-operator">=</span> <span class="cm-variable">Files</span>.<span class="cm-variable">createTempDirectory</span>(<span class="cm-string">"input"</span>).<span class="cm-variable">toFile</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">File</span> <span class="cm-variable">output</span> <span class="cm-operator">=</span> <span class="cm-variable">Files</span>.<span class="cm-variable">createTempFile</span>(<span class="cm-string">"output"</span>, <span class="cm-string">".zip"</span>).<span class="cm-variable">toFile</span>(); <span class="cm-comment">// 创建临时目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">try</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">FileUtil</span>.<span class="cm-variable">unzip</span>(<span class="cm-variable">fileStream</span>, <span class="cm-variable">input</span>); <span class="cm-comment">// 解压 ZIP 文件到临时目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">try</span> (<span class="cm-variable">FileOutputStream</span> <span class="cm-variable">fos</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">FileOutputStream</span>(<span class="cm-variable">output</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">ZipArchiveOutputStream</span> <span class="cm-variable">zipOut</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ZipArchiveOutputStream</span>(<span class="cm-variable">fos</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// ...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ImageUtil</span>.<span class="cm-variable">handleImage</span>(<span class="cm-variable">params</span>, <span class="cm-variable">ImageIO</span>.<span class="cm-variable">read</span>(<span class="cm-variable">f</span>), <span class="cm-variable">price</span>, <span class="cm-variable">backgroundImage</span>, <span class="cm-variable">zipOut</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">zipOut</span>.<span class="cm-variable">closeArchiveEntry</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tableNoMatch</span>.<span class="cm-variable">remove</span>(<span class="cm-variable">mid</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">successMatch</span>.<span class="cm-variable">add</span>(<span class="cm-variable">mid</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// ...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">progress</span> <span class="cm-operator">=</span> <span class="cm-operator">++</span><span class="cm-variable">validFilesCount</span> <span class="cm-operator">*</span> <span class="cm-number">100</span> <span class="cm-operator">/</span> (<span class="cm-variable">files</span>.<span class="cm-variable">length</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">progress</span> <span class="cm-operator">==</span> <span class="cm-number">100</span>) <span class="cm-variable">progress</span> <span class="cm-operator">=</span> <span class="cm-number">99</span>; <span class="cm-comment">// 等待收尾工作</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">P</span>.<span class="cm-variable">put</span>(<span class="cm-variable">username</span>, <span class="cm-variable">progress</span>); <span class="cm-comment">// 实时更新进度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">catch</span> (<span class="cm-variable">InvalidFormatException</span> <span class="cm-variable">e</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">RuntimeException</span>(<span class="cm-variable">e</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">finally</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span>, <span class="cm-variable">Set</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">info</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashMap</span><span class="cm-operator">&lt;&gt;</span>( <span class="cm-comment">// 收集任务执行的附加信息</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span>.<span class="cm-variable">ofEntries</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span>.<span class="cm-variable">entry</span>(<span class="cm-string">"successMatch"</span>, <span class="cm-variable">filterEmptyStrings</span>(<span class="cm-variable">successMatch</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span>.<span class="cm-variable">entry</span>(<span class="cm-string">"tableNoMatch"</span>, <span class="cm-variable">filterEmptyStrings</span>(<span class="cm-variable">tableNoMatch</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Map</span>.<span class="cm-variable">entry</span>(<span class="cm-string">"imageNoMatch"</span>, <span class="cm-variable">filterEmptyStrings</span>(<span class="cm-variable">imageNoMatch</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">INFO</span>.<span class="cm-variable">put</span>(<span class="cm-variable">username</span>, <span class="cm-variable">info</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ZIP</span>.<span class="cm-variable">put</span>(<span class="cm-variable">username</span>, <span class="cm-variable">output</span>); <span class="cm-comment">// 将最终的 ZIP 数据存入 Map</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">P</span>.<span class="cm-variable">put</span>(<span class="cm-variable">username</span>, <span class="cm-number">100</span>); <span class="cm-comment">// 标记任务完成</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">finally</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">FileUtil</span>.<span class="cm-variable">deleteDirectory</span>(<span class="cm-variable">input</span>); <span class="cm-comment">// 无论是否异常，删除临时目录释放资源</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 852px;"></div><div class="CodeMirror-gutters" style="display: none; height: 852px;"></div></div></div></pre><h4 id='6-可扩展的设计模式与工具类'><span>6. 可扩展的设计模式与工具类</span></h4><p><strong><span>亮点描述：</span></strong></p><ul><li><strong><span>Builder 模式</span></strong><span>：在 </span><code>WatermarkParams</code><span> 和 </span><code>WatermarkParamsDTO</code><span> 中使用 </span><code>@Builder</code><span> 注解，简化复杂对象的构造</span></li><li><strong><span>参数化配置</span></strong><span>：通过 </span><code>PresetStyleParams</code><span> 提供预设水印参数模板（如 </span><code>ImageUtil.P</code><span> 中的 5 种预设样式），降低客户端配置复杂度</span></li><li><strong><span>工具类复用</span></strong><span>：</span><code>FileUtil</code><span> 封装 ZIP 解压和目录删除，</span><code>CrawlerUtil</code><span> 实现网页爬虫的核心逻辑，提升代码复用率</span></li></ul><p><strong><span>代码片段：</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@With</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Builder</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Getter</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">WatermarkParams</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">int</span> <span class="cm-variable">N</span> <span class="cm-operator">=</span> <span class="cm-number">1200</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 位置（水印左下角的起始坐标）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">N</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 字符偏移</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">dx</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">dy</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Boolean</span> <span class="cm-variable">includeCharWidthInDx</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Boolean</span> <span class="cm-variable">includeCharHeightInDy</span> <span class="cm-operator">=</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 字体</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">String</span> <span class="cm-variable">fontName</span> <span class="cm-operator">=</span> <span class="cm-string">"微软雅黑"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">fontStyles</span> <span class="cm-operator">=</span> <span class="cm-variable">Font</span>.<span class="cm-variable">PLAIN</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">fontSize</span> <span class="cm-operator">=</span> <span class="cm-number">100</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">Color</span> <span class="cm-variable">fontColor</span> <span class="cm-operator">=</span> <span class="cm-variable">Color</span>.<span class="cm-variable">BLACK</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 描边</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">strokeSize</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">Color</span> <span class="cm-variable">strokeColor</span> <span class="cm-operator">=</span> <span class="cm-variable">Color</span>.<span class="cm-variable">WHITE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 投影</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">shadowDx</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Integer</span> <span class="cm-variable">shadowDy</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">Color</span> <span class="cm-variable">shadowColor</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Color</span>(<span class="cm-number">0</span>, <span class="cm-number">0</span>, <span class="cm-number">0</span>, <span class="cm-number">0</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Float</span> <span class="cm-variable">shadowOpacity</span> <span class="cm-operator">=</span> <span class="cm-number">0f</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 渐变</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">GradientParams</span> <span class="cm-variable">fontGradient</span> <span class="cm-operator">=</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">GradientParams</span> <span class="cm-variable">strokeGradient</span> <span class="cm-operator">=</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 仿射变换</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Float</span> <span class="cm-variable">rotation</span> <span class="cm-operator">=</span> <span class="cm-number">0f</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Float</span> <span class="cm-variable">shearX</span> <span class="cm-operator">=</span> <span class="cm-number">0f</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Boolean</span> <span class="cm-variable">priorityRotation</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@With</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Builder</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Getter</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">class</span> <span class="cm-def">GradientParams</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">Point</span> <span class="cm-variable">start</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Point</span>(<span class="cm-number">0</span>, <span class="cm-number">0</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">Color</span> <span class="cm-variable">startColor</span> <span class="cm-operator">=</span> <span class="cm-variable">Color</span>.<span class="cm-variable">BLUE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">Point</span> <span class="cm-variable">end</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Point</span>(<span class="cm-variable">N</span>, <span class="cm-variable">N</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">Color</span> <span class="cm-variable">endColor</span> <span class="cm-operator">=</span> <span class="cm-variable">Color</span>.<span class="cm-variable">RED</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-meta">@Builder</span>.<span class="cm-variable">Default</span> <span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">Boolean</span> <span class="cm-variable">cyclic</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1221px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1221px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ImageUtil</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable">java</span>.<span class="cm-variable">util</span>.<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">WatermarkParams</span><span class="cm-operator">&gt;</span> <span class="cm-variable">P</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span>.<span class="cm-variable">of</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">WatermarkParams</span>.<span class="cm-variable">builder</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">x</span>(<span class="cm-number">90</span>).<span class="cm-variable">y</span>(<span class="cm-number">1165</span>).<span class="cm-variable">dx</span>(<span class="cm-operator">-</span><span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">fontName</span>(<span class="cm-string">"Source Han Sans CN"</span>).<span class="cm-variable">fontSize</span>(<span class="cm-number">130</span>).<span class="cm-variable">fontColor</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Color</span>(<span class="cm-number">254</span>, <span class="cm-number">249</span>, <span class="cm-number">233</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">build</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">WatermarkParams</span>.<span class="cm-variable">builder</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">x</span>(<span class="cm-number">90</span>).<span class="cm-variable">y</span>(<span class="cm-number">1165</span>).<span class="cm-variable">dx</span>(<span class="cm-operator">-</span><span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">fontName</span>(<span class="cm-string">"Source Han Sans CN"</span>).<span class="cm-variable">fontSize</span>(<span class="cm-number">130</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">fontGradient</span>(<span class="cm-variable">WatermarkParams</span>.<span class="cm-variable">GradientParams</span>.<span class="cm-variable">builder</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">startColor</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Color</span>(<span class="cm-number">254</span>, <span class="cm-number">249</span>, <span class="cm-number">233</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">end</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Point</span>(<span class="cm-number">80</span>, <span class="cm-number">80</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">endColor</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Color</span>(<span class="cm-number">220</span>, <span class="cm-number">176</span>, <span class="cm-number">119</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">build</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">build</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">WatermarkParams</span>.<span class="cm-variable">builder</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">x</span>(<span class="cm-number">333</span>).<span class="cm-variable">y</span>(<span class="cm-number">510</span>).<span class="cm-variable">dy</span>(<span class="cm-operator">-</span><span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">fontStyles</span>(<span class="cm-variable">Font</span>.<span class="cm-variable">BOLD</span> <span class="cm-operator">|</span> <span class="cm-variable">Font</span>.<span class="cm-variable">ITALIC</span>).<span class="cm-variable">fontSize</span>(<span class="cm-number">55</span>).<span class="cm-variable">fontColor</span>(<span class="cm-variable">Color</span>.<span class="cm-variable">WHITE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">strokeSize</span>(<span class="cm-number">5</span>).<span class="cm-variable">strokeColor</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Color</span>(<span class="cm-number">250</span>, <span class="cm-number">65</span>, <span class="cm-number">10</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">build</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">WatermarkParams</span>.<span class="cm-variable">builder</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">x</span>(<span class="cm-number">70</span>).<span class="cm-variable">y</span>(<span class="cm-number">705</span>).<span class="cm-variable">dx</span>(<span class="cm-operator">-</span><span class="cm-number">8</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">fontName</span>(<span class="cm-string">"DIN"</span>).<span class="cm-variable">fontStyles</span>(<span class="cm-variable">Font</span>.<span class="cm-variable">BOLD</span>).<span class="cm-variable">fontColor</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Color</span>(<span class="cm-number">227</span>, <span class="cm-number">34</span>, <span class="cm-number">17</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">build</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">WatermarkParams</span>.<span class="cm-variable">builder</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">x</span>(<span class="cm-number">840</span>).<span class="cm-variable">y</span>(<span class="cm-number">1175</span>).<span class="cm-variable">dx</span>(<span class="cm-operator">-</span><span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">fontName</span>(<span class="cm-string">"HarmonyOS Sans"</span>).<span class="cm-variable">fontStyles</span>(<span class="cm-variable">Font</span>.<span class="cm-variable">BOLD</span> <span class="cm-operator">|</span> <span class="cm-variable">Font</span>.<span class="cm-variable">ITALIC</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>.<span class="cm-variable">fontSize</span>(<span class="cm-number">140</span>).<span class="cm-variable">fontColor</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Color</span>(<span class="cm-number">0xfdf04a</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">strokeSize</span>(<span class="cm-number">6</span>).<span class="cm-variable">strokeColor</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Color</span>(<span class="cm-number">0x065223</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  .<span class="cm-variable">build</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 760px;"></div><div class="CodeMirror-gutters" style="display: none; height: 760px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">FileUtil</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable">Set</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">TABLE</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashSet</span><span class="cm-operator">&lt;&gt;</span>(<span class="cm-variable">List</span>.<span class="cm-variable">of</span>( <span class="cm-comment">// 支持的表格形式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"xls"</span>, <span class="cm-string">"xlsx"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"XLS"</span>, <span class="cm-string">"XLSX"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable">Set</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">IMAGE</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HashSet</span><span class="cm-operator">&lt;&gt;</span>(<span class="cm-variable">List</span>.<span class="cm-variable">of</span>( <span class="cm-comment">// 支持的图片形式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"jpg"</span>, <span class="cm-string">"jpeg"</span>, <span class="cm-string">"png"</span>, <span class="cm-string">"webp"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"JPG"</span>, <span class="cm-string">"JPEG"</span>, <span class="cm-string">"PNG"</span>, <span class="cm-string">"WEBG"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable">Pattern</span> <span class="cm-variable">ERROR_PATTERN</span> <span class="cm-operator">=</span> <span class="cm-variable">Pattern</span>.<span class="cm-variable">compile</span>(<span class="cm-string">"[\\\\/:*?\"&lt;&gt;|]"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">String</span> <span class="cm-variable">ERROR_PATH</span> <span class="cm-operator">=</span> <span class="cm-string">"ERROR-"</span> <span class="cm-operator">+</span> <span class="cm-variable">UUID</span>.<span class="cm-variable">randomUUID</span>().<span class="cm-variable">toString</span>().<span class="cm-variable">substring</span>(<span class="cm-number">0</span>, <span class="cm-number">8</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">unzip</span>(<span class="cm-variable">InputStream</span> <span class="cm-variable">fileStream</span>, <span class="cm-variable">File</span> <span class="cm-variable">destDir</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">IOException</span> { <span class="cm-comment">// 解压 ZIP 文件到目标目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">try</span> (<span class="cm-variable">ZipArchiveInputStream</span> <span class="cm-variable">zipIn</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ZipArchiveInputStream</span>(<span class="cm-variable">fileStream</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ZipArchiveEntry</span> <span class="cm-variable">entry</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">while</span> ((<span class="cm-variable">entry</span> <span class="cm-operator">=</span> <span class="cm-variable">zipIn</span>.<span class="cm-variable">getNextZipEntry</span>()) <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">File</span> <span class="cm-variable">entryDestination</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">File</span>(<span class="cm-variable">destDir</span>, <span class="cm-variable">entry</span>.<span class="cm-variable">getName</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">entry</span>.<span class="cm-variable">isDirectory</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">entryDestination</span>.<span class="cm-variable">mkdirs</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Files</span>.<span class="cm-variable">createDirectories</span>(<span class="cm-variable">entryDestination</span>.<span class="cm-variable">getParentFile</span>().<span class="cm-variable">toPath</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">try</span> (<span class="cm-variable">FileOutputStream</span> <span class="cm-variable">fos</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">FileOutputStream</span>(<span class="cm-variable">entryDestination</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">IOUtils</span>.<span class="cm-variable">copy</span>(<span class="cm-variable">zipIn</span>, <span class="cm-variable">fos</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">deleteDirectory</span>(<span class="cm-variable">File</span> <span class="cm-variable">dir</span>) { <span class="cm-comment">// 递归删除目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">dir</span>.<span class="cm-variable">exists</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">File</span> <span class="cm-variable">file</span> : <span class="cm-variable">Objects</span>.<span class="cm-variable">requireNonNull</span>(<span class="cm-variable">dir</span>.<span class="cm-variable">listFiles</span>())) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">file</span>.<span class="cm-variable">isDirectory</span>()) <span class="cm-variable">deleteDirectory</span>(<span class="cm-variable">file</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">file</span>.<span class="cm-variable">delete</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">dir</span>.<span class="cm-variable">delete</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">boolean</span> <span class="cm-variable">checkFileName</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) { <span class="cm-comment">// 判断文件名合法性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">ERROR_PATTERN</span>.<span class="cm-variable">matcher</span>(<span class="cm-variable">name</span>).<span class="cm-variable">find</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1036px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1036px;"></div></div></div></pre><h3 id='前端-2'><span>前端</span></h3><h4 id='1-模块化与组件化设计'><span>1. 模块化与组件化设计</span></h4><ul><li><span>使用 Vue3 实现逻辑复用，如</span><code>ForgetPage.vue</code><span>、</span><code>RegisterPage.vue</code><span>中复用表单验证逻辑</span></li><li><span>封装通用组件（如</span><code>Title.vue</code><span>），通过</span><code>inject</code><span>依赖注入实现动态标题配置，提升组件复用性</span></li><li><span>自定义指令</span><code>LazyLoad.js</code><span>实现图片懒加载，优化性能</span></li></ul><h4 id='2-响应式表单与复杂交互'><span>2. 响应式表单与复杂交互</span></h4><ul><li><span>多步骤表单动态切换（如</span><code>ForgetPage.vue</code><span>的分步密码重置），结合 Element Plus 的</span><code>ElSteps</code><span>和</span><code>transition</code><span>过渡动画</span></li><li><span>表单验证规则深度定制（如用户名仅允许中文/英文、密码一致性校验），支持异步验证（如邮件验证码请求）</span></li><li><span>实时参数配置面板（</span><code>BatchImageWatermarker.vue</code><span>），通过</span><code>watch</code><span>深度监听参数变化并动态生成预览图</span></li></ul><h4 id='3-路由与权限控制'><span>3. 路由与权限控制</span></h4><ul><li><span>路由守卫（</span><code>router.beforeEach</code><span>）实现全局权限控制，未登录用户强制跳转至登录页，已登录用户禁止访问欢迎页</span></li><li><span>动态路由配置（嵌套路由、子路由懒加载），优化首屏加载速度</span></li><li><span>路由元信息（</span><code>meta</code><span>）动态修改页面标题和图标</span></li></ul><h4 id='4-状态管理与持久化'><span>4. 状态管理与持久化</span></h4><ul><li><span>使用 Pinia 管理全局状态（如用户登录信息），并通过</span><code>setupPersistedStore</code><span>插件实现状态持久化，避免刷新丢失数据</span></li><li><span>模块化 Store 设计（</span><code>stores/index.js</code><span>），分离认证状态与其他业务逻辑</span></li></ul><h4 id='5-网络请求封装与错误处理'><span>5. 网络请求封装与错误处理</span></h4><ul><li><span>统一封装网络请求（</span><code>net/index.js</code><span>），支持</span><code>_GET</code><span>、</span><code>_POST</code><span>等方法的错误拦截与消息提示</span></li><li><span>异步请求与 UI 联动（如</span><code>coldTime</code><span>倒计时控制验证码按钮禁用状态）</span></li></ul><h4 id='6-复杂文件处理与可视化'><span>6. 复杂文件处理与可视化</span></h4><ul><li><span>批量上传 ZIP 文件并解析（</span><code>BatchImageWatermarker.vue</code><span>），分块展示处理结果（成功匹配、表/图匹配失败）</span></li><li><span>图片预览功能支持自定义背景上传，结合后端接口生成水印效果图</span></li><li><span>进度条（</span><code>ElProgress</code><span>）实时显示处理进度</span></li></ul><h4 id='7-uiux-细节优化'><span>7. UI/UX 细节优化</span></h4><ul><li><span>使用 Element Plus 过渡动画（如</span><code>ElFadeInLinear</code><span>）提升页面切换流畅度</span></li><li><span>统一的消息提示（</span><code>ElMessage</code><span>）与弹窗交互（</span><code>ElMessageBox</code><span>）</span></li><li><span>移动端适配（如</span><code>margin</code><span>、</span><code>flex</code><span>布局）和表单输入限制（如</span><code>maxlength</code><span>）</span></li></ul><p>&nbsp;</p><h2 id='📊-代码量统计'><span>📊 代码量统计</span></h2><p><span>数据截止至 </span><strong><span>v1.5.4</span></strong></p><p><span>（单位：行，不包含文档代码）</span></p><figure><table><thead><tr><th style='text-align:center;' ><span>项目名</span></th><th style='text-align:center;' ><span>后端</span></th><th style='text-align:center;' ><span>前端</span></th><th style='text-align:center;' ><span>总和</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>猜数字游戏</span></td><td style='text-align:center;' ><span>153</span></td><td style='text-align:center;' ><span>337</span></td><td style='text-align:center;' ><span>490</span></td></tr><tr><td style='text-align:center;' ><span>角色自截图</span></td><td style='text-align:center;' ><span>163</span></td><td style='text-align:center;' ><span>446</span></td><td style='text-align:center;' ><span>609</span></td></tr><tr><td style='text-align:center;' ><span>连连看游戏</span></td><td style='text-align:center;' ><span>169</span></td><td style='text-align:center;' ><span>1188</span></td><td style='text-align:center;' ><span>1357</span></td></tr><tr><td style='text-align:center;' ><span>简单爬虫脚本</span></td><td style='text-align:center;' ><span>250</span></td><td style='text-align:center;' ><span>217</span></td><td style='text-align:center;' ><span>467</span></td></tr><tr><td style='text-align:center;' ><span>批量图片水印处理</span></td><td style='text-align:center;' ><span>1179</span></td><td style='text-align:center;' ><span>1326</span></td><td style='text-align:center;' ><span>2505</span></td></tr><tr><td style='text-align:center;' ><span>（其他代码）</span></td><td style='text-align:center;' ><span>848</span></td><td style='text-align:center;' ><span>1388</span></td><td style='text-align:center;' ><span>2233</span></td></tr><tr><td style='text-align:center;' ><strong><span>总和</span></strong></td><td style='text-align:center;' ><span>2762</span></td><td style='text-align:center;' ><span>4899</span></td><td style='text-align:center;' ><span>7661</span></td></tr></tbody></table></figure><p>&nbsp;</p><h2 id='📂-项目结构'><span>📂 项目结构</span></h2><h3 id='后端-3'><span>后端</span></h3><p><span>本地服务拓扑图：</span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-31.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-31.png"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">backend</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── src</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── main</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── com</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; └── example</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── config</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── SecurityConfiguration.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── WebConfiguration.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── controller</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── AuthorizeController.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── BatchImageWatermarkerController.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── CharacterMapController.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── CrawlerController.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── GuessNumberController.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── IndexController.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── LinkGameController.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── UserController.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── convert</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── WatermarkParamsConvert.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── dto</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── ImageRequestDTO.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── WatermarkDataDTO.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── WatermarkParamsDTO.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── entity</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── common</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; │ &nbsp; ├── Account.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; │ &nbsp; ├── AccountUser.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; │ &nbsp; └── RestBean.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── other</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; ├── GuessNumber.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; ├── ImageInfo.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; ├── WatermarkData.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; └── WatermarkParams.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── exception</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── FontNotFoundException.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── GlobalExceptionHandler.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── interceptor</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── AuthorizeInterceptor.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── mapper</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── LinkMapper.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── UserMapper.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── WatermarkMapper.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── service</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── api</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; │ &nbsp; ├── AuthorizeService.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; │ &nbsp; ├── BatchImageWatermarkerService.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; │ &nbsp; ├── CharacterMapService.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; │ &nbsp; ├── CrawlerService.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; │ &nbsp; ├── GuessNumberService.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; │ &nbsp; └── LinkGameService.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── impl</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; ├── AuthorizeServiceImpl.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; ├── BatchImageWatermarkerServiceImpl.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; ├── CharacterMapServiceImpl.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; ├── CrawlerServiceImpl.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; ├── GuessNumberServiceImpl.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; &nbsp; &nbsp; └── LinkGameServiceImpl.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ├── util</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── CrawlerUtil.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; ├── FileUtil.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; │ &nbsp; └── ImageUtil.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── BackendApplication.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── resources</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; └── application.yml</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── test</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; └── java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── com</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── example</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; └── XkqlApplicationTest.java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── static</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── 图片</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── 默认背景图.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── 表格</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── 默认统计报表.xlsx</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── 字体</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── Source Han Sans CN.otf</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── 黑体.ttf</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; ├── 楷体.ttf</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; &nbsp; &nbsp; └── 微软雅黑.ttf</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">└── pom.xml</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1866px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1866px;"></div></div></div></pre><h3 id='前端-3'><span>前端</span></h3><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">frontend</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── public</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── icon</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── BatchImageWatermarker.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── CharacterMap.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── Crawler.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── Document.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── GuessNumber.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── LinkGame.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── Test.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── 批量图片水印处理</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 纯白背景图.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 自定义样式 0.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 预设样式 1.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── 预设样式 5.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── 角色图</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 保登心爱</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 保登心爱 001.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 保登心爱 571.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 保登摩卡</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 保登摩卡 01.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 保登摩卡 75.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 塞西莉亚</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 塞西莉亚 01.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 塞西莉亚 48.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 天天座理世</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 天天座理世 001.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 天天座理世 256.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 奈津惠</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 奈津惠 01.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 奈津惠 74.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 宇佐美瑞希</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 宇佐美瑞希 01.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 宇佐美瑞希 47.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 宇治松千夜</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 宇治松千夜 001.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 宇治松千夜 195.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 提比</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 提比 01.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 提比 46.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 条河麻耶</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 条河麻耶 01.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 条河麻耶 96.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 桐间纱路</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 桐间纱路 001.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 桐间纱路 275.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 豆馅</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 豆馅 1.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 豆馅 5.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 野雁</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 野雁 1.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 野雁 9.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 青山蓝山</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── 青山蓝山 01.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── 青山蓝山 46.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── 香风智乃</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; ├── 香风智乃 001.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; ├── ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; └── 香风智乃 430.jpg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── 角色图压缩</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 保登心爱.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 保登摩卡.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 塞西莉亚.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 天天座理世.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 奈津惠.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 宇佐美瑞希.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 宇治松千夜.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 提比.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 条河麻耶.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 桐间纱路.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 豆馅.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 野雁.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── 青山蓝山.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── 香风智乃.zip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── favicon.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── 产品使用手册.html</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── 技术开发文档.html</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── 项目文档.html</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── src</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── components</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── layout</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── Title.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── welcome</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; ├── ForgetPage.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; ├── LoginPage.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; └── RegisterPage.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── directives</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── lazyLoad.js</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── net</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── index.js</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── router</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── index.js</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── stores</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── index.js</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── views</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── batchImageWatermarker</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── BatchImageWatermarker.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── characterMap</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── CharacterMap.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── CharacterMapSub.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── common</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── Document.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── Index.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── Test.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── Welcome.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── crawler</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── Crawler.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; ├── guessNumber</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── GuessNumber.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; ├── HistoricalRecord.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; │ &nbsp; └── Playing.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; └── linkGame</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; ├── HistoricalRecord.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; ├── Library.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; ├── LinkGame.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; │ &nbsp; &nbsp; &nbsp; └── Playing.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; ├── App.vue</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">│ &nbsp; └── main.js</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── README.md</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── frontend.iml</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── index.html</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── jsconfig.json</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── package-lock.json</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── package.json</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">├── vite.config.js</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">└── vite.config.js.timestamp-1724388971674-1408e123a3c85.mjs</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 3224px;"></div><div class="CodeMirror-gutters" style="display: none; height: 3224px;"></div></div></div></pre><p>&nbsp;</p><h2 id='🔄-版本控制'><span>🔄 版本控制</span></h2><p><strong><span>2024-8-22：[1.0.0]</span></strong></p><ul><li><span>项目初始化</span></li><li><span>添加猜数字游戏</span></li></ul><p><strong><span>2024-8-23：[1.1.0]</span></strong></p><ul><li><span>添加角色自截图</span></li></ul><p><strong><span>2024-8-28：[1.1.1]</span></strong></p><ul><li><span>角色自截图添加批量下载按钮</span></li></ul><p><strong><span>2024-9-8：[1.1.2]</span></strong></p><ul><li><span>界面 UI 重构</span></li></ul><p><strong><span>2024-9-26：[1.2.0]</span></strong></p><ul><li><span>添加连连看游戏</span></li></ul><p><strong><span>2024-10-6：[1.2.1]</span></strong></p><ul><li><span>角色自截图资源更新</span></li></ul><p><strong><span>2024-10-7：[1.3.0]</span></strong></p><ul><li><span>添加声骸评分系统</span></li></ul><p><strong><span>2024-10-19：[1.3.1]</span></strong></p><ul><li><p><span>将声骸评分系统拆分为独立项目（因迁移操作未及时提交Git，此处为文档追溯补充）</span></p><p><span>声骸评分系统项目的地址：</span><a href='https://github.com/KokoaChino/EchoScoringSystem' target='_blank' class='url'>https://github.com/KokoaChino/EchoScoringSystem</a></p></li></ul><p><strong><span>2025-3-18：[1.3.2]</span></strong></p><ul><li><span>版本号规范化（采用 SemVer 标准，主版本号重置）</span></li></ul><p><strong><span>2025-4-1：[1.4.0]</span></strong></p><ul><li><span>添加简单爬虫脚本</span></li></ul><p><strong><span>2025-4-4：[1.5.0]</span></strong></p><ul><li><span>添加批量图片水印处理</span></li></ul><p><strong><span>2025-4-15：[1.5.1]</span></strong></p><ul><li><span>批量图片水印处理添加自定义样式，样式持久化功能</span></li></ul><p><strong><span>2025-4-26：[1.5.2]</span></strong></p><ul><li><span>项目正式上线：</span><a href='http://8.138.214.176:5174' target='_blank' class='url'>http://8.138.214.176:5174</a></li><li><span>编写了完整的项目文档</span></li><li><span>邮件发送改为异步</span></li><li><span>新增支持上传 .otf 字体文件，完善了图片水印处理的字体选择逻辑</span></li></ul><p><strong><span>2025-5-5：[1.5.3]</span></strong></p><ul><li><p><strong><span>架构优化</span></strong><span>：</span></p><ul><li><span>重构前后端Base64传输协议，标准化数据字段结构（前后端仅传输原始二进制数据，前端渲染时动态添加data:image/jpeg;base64,头信息）</span></li><li><span>实现图片水印处理路径自定义功能，支持输出目录指定与文件重命名规则配置</span></li><li><span>完成MySQL和Redis数据库服务迁移，通过独立部署缓解主服务器资源压力</span></li></ul></li><li><p><strong><span>性能提升</span></strong><span>：</span></p><ul><li><span>将任务处理线程模型升级为动态线程池，实现并发请求的弹性资源分配</span></li><li><span>优化内存管理策略，采用流式处理替代全量二进制读写，配合定时任务自动清理缓存文件</span></li></ul></li><li><p><strong><span>功能增强</span></strong><span>：</span></p><ul><li><span>新增PNG格式样式图层兼容支持，确保特效渲染结果图完整性</span></li><li><span>增强用户认证体系与「记住我」功能稳定性，降低未授权访问(401)异常触发频率</span></li></ul></li><li><p><strong><span>移动端适配</span></strong><span>：</span></p><ul><li><span>重构响应式布局框架，实现PC/移动端跨设备分辨率兼容</span></li><li><span>优化触摸事件监听系统，使角色自截图、连连看游戏等交互组件全面支持移动端触控操作</span></li></ul></li><li><p><strong><span>文档完善</span></strong><span>：</span></p><ul><li><span>主页新增产品使用手册与技术开发文档模块，提供终端用户操作指南与开发者技术说明</span></li></ul></li></ul><p><strong><span>2025-5-13：[1.5.4]</span></strong></p><ul><li><p><span>批量图片水印处理新增功能：</span></p><ol start='' ><li><span>复制样式操作</span></li><li><span>上传进度条</span></li><li><span>输出统计报表表格文件</span></li></ol></li><li><p><span>优化了文档中心的交互</span></p></li></ul><p>&nbsp;</p><h2 id='🤝-贡献指南'><span>🤝 贡献指南</span></h2><p><em><span>🚧 文档完善中（预计下个主要版本更新）</span></em></p><p><span>如有紧急贡献需求，请通过 </span><a href='https://github.com/KokoaChino/xkql/issues'><span>GitHub Issues</span></a><span> 或 📧 </span><a href='mailto:2178740980@qq.com' target='_blank' class='url'>2178740980@qq.com</a><span> 联系维护者</span></p><p>&nbsp;</p><h2 id='📜-许可证'><span>📜 许可证</span></h2><p><span>本项目采用 </span><strong><a href='LICENSE'><span>MIT License</span></a></strong><span> 开源协议，核心条款如下：</span></p><p><span>✅ </span><strong><span>允许的操作</span></strong><span>：</span></p><ul><li><span>自由使用、复制、修改、合并、发布、分发本项目</span></li><li><span>可用于商业用途</span></li><li><span>允许闭源二次开发</span></li></ul><p><span>⚠️ </span><strong><span>唯一义务</span></strong><span>：</span></p><ul><li><strong><span>必须保留原始版权声明</span></strong><span>（包含在项目所有副本中）</span></li></ul><p><span>🛡️ </span><strong><span>免责声明</span></strong><span>：</span></p><blockquote><p><span>本项目按&quot;原样&quot;提供，无任何明示或暗示的保证，包括但不限于适销性和特定用途适用性</span></p><p><span>作者/版权持有者对任何索赔、损害或其他责任不承担责任</span></p></blockquote><p><span>完整法律文本请查看 </span><a href='LICENSE'><span>LICENSE</span></a><span> 文件</span></p><p>&nbsp;</p><h2 id='❓-常见问题'><span>❓ 常见问题</span></h2><h3 id='在线访问'><span>在线访问</span></h3><ol start='' ><li><p><strong><span>文件处理过程中进度条卡住</span></strong></p><p><span>▸ 当前服务器配置为 2G 内存，上传超过 200MB 的 .zip 文件可能导致内存溢出 </span>
<span>▸ 临时方案：请将压缩包控制在 200MB 以内，分批上传处理 </span>
<span>▸ 优化计划：等我有钱了给服务器内存扩容</span></p></li></ol><h3 id='本地部署'><span>本地部署</span></h3><ol start='' ><li><p><strong><span>字体缺失报错处理</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="diff"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="diff"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-positive">+ 系统预设样式报错：</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  1. 下载对应字体文件</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  2. 安装至系统字体目录（Windows: C:\Windows\Fonts）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-positive">+ 自定义样式报错：</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  请根据提示上传字体文件</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre></li><li><p><strong><span>角色自截图批量下载不全</span></strong><span> </span></p><p><span>▸ </span><em><span>现象说明</span></em><span>：因 GitHub 仓库限制大文件上传，压缩包中仅包含阉割版角色图集</span></p><p><span>▸ </span><em><span>完整版获取方案</span></em><span>：  </span></p><ol start='' ><li><span>打开本地项目目录 </span><code>xkql\frontend\public\角色图</code><span>  </span></li><li><strong><span>手动全选所有文件夹</span></strong><span> → 右键生成 .zip 压缩包  </span></li><li><span>将新压缩包</span><strong><span>覆盖替换</span></strong><span>到 </span><code>角色图压缩</code><span> 目录中即可  </span></li></ol><p><span> ▸ </span><em><span>注意事项</span></em><span>： </span>
<span> ⚠️ 完整图集约需 700M 存储空间，操作前请确保磁盘容量充足 </span>
<span> ⚠️ 覆盖后需重启前端服务使变更生效</span></p><p><span> ▸ </span><em><span>优化计划</span></em><span>： </span>
<span>    长期计划迁移至 Git LFS 存储 (需企业版 GitHub)  </span></p></li></ol><p><span>如有紧急问题反映，请通过 </span><a href='https://github.com/KokoaChino/xkql/issues'><span>GitHub Issues</span></a><span> 或 📧 </span><a href='mailto:2178740980@qq.com' target='_blank' class='url'>2178740980@qq.com</a><span> 联系维护者</span></p><p>&nbsp;</p><h2 id='📞-联系方式'><span>📞 联系方式</span></h2><ul><li><strong><span>QQ：</span></strong><span>2178740980</span></li><li><strong><span>微信：</span></strong><span>ryu0785</span></li><li><strong><span>GitHub Issues</span></strong><span>：</span><a href='https://github.com/KokoaChino/xkql/issues' target='_blank' class='url'>https://github.com/KokoaChino/xkql/issues</a></li></ul><p>&nbsp;</p><h2 id='💌-反馈与支持'><span>💌 反馈与支持</span></h2><p><span>如遇系统异常或有优化建议，欢迎在 </span><a href='https://github.com/KokoaChino/xkql/issues'><span>GitHub Issues</span></a><span> 提交反馈。您的每一条意见都将推动项目迭代</span>
<span>若您认为此项目对您有所助益，您的 </span><strong><span>Star</span></strong><span> 或 </span><strong><span>Pull Request</span></strong><span> 将是我持续改进的最大动力</span></p><p><span>衷心感谢您的关注与支持！</span>
<span>—— 项目开发者 星开祈灵 (*´∀`)~♥ </span></p><p><img src="http://8.138.214.176:5174/项目图床/星开祈灵百宝箱%20项目文档-29.png?v=1" referrerpolicy="no-referrer" alt="星开祈灵百宝箱 项目文档-29.png"></p><p>&nbsp;</p></div></div>
</body>
</html>